<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<title>Space Tetris ‚Äì Mobile Friendly Space Theme</title>
<style>
  body { margin:0; background:radial-gradient(#020617,#000); font-family:Arial; overflow:hidden; color:white; }
  #game-container { width:100vw; height:100vh; display:flex; align-items:center; justify-content:center; position:relative; }
  canvas { background:#000; border:4px solid #f2a42d; box-shadow:0 0 25px #f2a42d; }
  #ui { position:absolute; top:20px; left:20px; font-size:22px; }
  #astronaut { position:absolute; bottom:140px; right:20px; width:130px; filter:drop-shadow(0 0 10px #fff); }
  #controls {
    position:absolute; bottom:30px; left:50%;
    transform:translateX(-50%);
    display:flex; gap:20px;
  }
  .control-btn {
    width:70px; height:70px;
    background:#111; border:3px solid #f2a42d;
    border-radius:12px; color:white;
    font-size:34px; display:flex; justify-content:center; align-items:center;
    box-shadow:0 0 12px #f2a42d;
    user-select:none;
  }
</style>
</head>
<body>

<div id='game-container'>
  <canvas id='tetris' width='300' height='600'></canvas>

  <div id='ui'>
    <div>Score: <span id='score'>0</span></div>
    <div>Level: <span id='level'>1</span></div>
    <div>Time: <span id='time'>0</span>s</div>
  </div>

  <img id='astronaut' src='https://i.imgur.com/yy1Oe8y.png'>

  <div id='controls'>
    <div class='control-btn' id='btn-left'>‚¨ÖÔ∏è</div>
    <div class='control-btn' id='btn-rotate'>üîÑ</div>
    <div class='control-btn' id='btn-right'>‚û°Ô∏è</div>
    <div class='control-btn' id='btn-down'>‚¨áÔ∏è</div>
  </div>
</div>

<script>
// canvas + UI
const canvas=document.getElementById('tetris');
const ctx=canvas.getContext('2d');
const scoreEl=document.getElementById('score');
const levelEl=document.getElementById('level');
const timeEl=document.getElementById('time');
const astronaut=document.getElementById('astronaut');

// settings
const blockSize=30, gridW=10, gridH=20;
const colors=['#ff6b6b','#4ecdc4','#ffe66d','#5f27cd','#48dbfb','#f2a42d','#1dd1a1'];
const shapes=[
  [[1,1,1,1]],
  [[1,1],[1,1]],
  [[0,1,0],[1,1,1]],
  [[1,0],[1,0],[1,1]],
  [[0,1],[0,1],[1,1]]
];

// space starfield
let stars=[];
for(let i=0;i<150;i++){
  stars.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    size:Math.random()*2,
    speed:0.3+Math.random()*0.7
  });
}

function drawStars(){
  ctx.save();
  ctx.fillStyle="white";
  stars.forEach(s=>{
    ctx.globalAlpha=0.3+Math.random()*0.7;
    ctx.fillRect(s.x,s.y,s.size,s.size);
    s.y+=s.speed;
    if(s.y>canvas.height) s.y=0;
  });
  ctx.restore();
}

// grid & gameplay
let grid=Array(gridH).fill().map(()=>Array(gridW).fill(0));
let piece, px, py, score=0, level=1, timer=0;

function newPiece(){ piece=shapes[Math.floor(Math.random()*shapes.length)]; px=3; py=0; }
function rotate(p){ return p[0].map((_,i)=>p.map(r=>r[i]).reverse()); }

function collides(nx,ny,np){
  for(let y=0;y<np.length;y++){
    for(let x=0;x<np[y].length;x++){
      if(np[y][x] && (nx+x<0||nx+x>=gridW||ny+y>=gridH||grid[ny+y][nx+x])) return true;
    }
  }
  return false;
}

function merge(){
  piece.forEach((row,y)=>row.forEach((v,x)=>{ if(v) grid[py+y][px+x]=1; }));
}

function clearLines(){
  for(let y=gridH-1;y>=0;y--){
    if(grid[y].every(v=>v)){
      grid.splice(y,1);
      grid.unshift(Array(gridW).fill(0));
      score+=100;
      level=Math.floor(score/500)+1;
      astronaut.style.transform='scale(1.2)';
      setTimeout(()=>astronaut.style.transform='',150);
    }
  }
  scoreEl.textContent=score;
  levelEl.textContent=level;
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawStars();

  for(let y=0;y<gridH;y++){
    for(let x=0;x<gridW;x++){
      if(grid[y][x]){
        ctx.fillStyle=colors[(x+y)%colors.length];
        ctx.fillRect(x*blockSize,y*blockSize,blockSize-1,blockSize-1);
      }
    }
  }
  piece.forEach((row,y)=>row.forEach((v,x)=>{ if(v){
    ctx.fillStyle=colors[(x+y)%colors.length];
    ctx.fillRect((px+x)*blockSize,(py+y)*blockSize,blockSize-1,blockSize-1);
  }}));
}

let dropCounter=0,last=0;
function update(ms){
  requestAnimationFrame(update);
  const delta=ms-last; last=ms;
  dropCounter+=delta;

  if(dropCounter > 950 - level*70){
    py++; dropCounter=0;
    if(collides(px,py,piece)){
      py--; merge(); clearLines(); newPiece();
      if(collides(px,py,piece)){
        alert("GAME OVER! Score: "+score);
        location.reload();
      }
    }
  }
  draw();
}

newPiece(); update(0);
setInterval(()=>{ timer++; timeEl.textContent=timer; }, 1000);

// keyboard
document.addEventListener('keydown',e=>{
  if(e.key==='ArrowLeft'&&!collides(px-1,py,piece)) px--;
  if(e.key==='ArrowRight'&&!collides(px+1,py,piece)) px++;
  if(e.key==='ArrowUp'){
    let r=rotate(piece);
    if(!collides(px,py,r)) piece=r;
  }
  if(e.key==='ArrowDown'){
    py++; if(collides(px,py,piece)) py--;
  }
});

// touch controls
document.getElementById("btn-left").onclick=()=>{ if(!collides(px-1,py,piece)) px--; };
document.getElementById("btn-right").onclick=()=>{ if(!collides(px+1,py,piece)) px++; };
document.getElementById("btn-rotate").onclick=()=>{ let r=rotate(piece); if(!collides(px,py,r)) piece=r; };
document.getElementById("btn-down").onclick=()=>{ py++; if(collides(px,py,piece)) py--; };
</script>

</body>
</html>