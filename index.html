<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<title>Space Tetris ‚Äì Full Mobile Version</title>

<style>
  body {
    margin: 0;
    background: black;
    font-family: Arial, sans-serif;
    overflow: hidden;
    color: white;
  }

  #start-screen {
    position: fixed;
    width: 100vw;
    height: 100vh;
    background: radial-gradient(#020617, #000);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 5;
  }

  #start-logo {
    font-size: 40px;
    color: #6fbaff;
    text-shadow: 0 0 6px #6fbaff, 0 0 14px #3d7bff;
    letter-spacing: 4px;
    margin-bottom: 30px;
  }

  #startBtn {
    width: 180px;
    padding: 14px;
    border: 3px solid #6fbaff;
    color: #6fbaff;
    background: #000;
    font-size: 26px;
    text-align: center;
    border-radius: 6px;
    box-shadow: 0 0 20px #6fbaff;
    image-rendering: pixelated;
  }

  #game-container {
    display: none;
    width: 100vw;
    height: 100vh;
    flex-direction: column;
    align-items: center;
    padding-top: 10px;
  }

  #tetris {
    width: 92vw;
    max-width: 420px;
    height: auto;
    border: 4px solid #6fbaff;
    background: black;
    box-shadow: 0 0 20px #6fbaff;
  }

  #ui {
    margin: 10px 0 6px;
    font-size: 18px;
    text-align: center;
  }

  #controls {
    display: flex;
    justify-content: center;
    gap: 18px;
    margin-top: 12px;
  }

  .control-btn {
    width: 65px;
    height: 65px;
    background: #111;
    border: 3px solid #6fbaff;
    border-radius: 10px;
    font-size: 32px;
    color: #6fbaff;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 0 12px #6fbaff;
    user-select: none;
  }

  /* GAME OVER SCREEN */
  #gameover-screen {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: radial-gradient(#000428,#004e92);
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
    text-shadow: 0 0 8px #6fbaff;
    z-index: 10;
  }

  #restartBtn {
    width: 180px;
    padding: 14px;
    border: 3px solid #6fbaff;
    background: #000;
    color: #6fbaff;
    text-align: center;
    border-radius: 6px;
    box-shadow: 0 0 20px #6fbaff;
    font-size: 26px;
    margin-top: 30px;
  }

</style>
</head>

<body>

<div id="start-screen">
  <div id="start-logo">SPACE TETRIS</div>
  <div id="startBtn">START</div>
</div>

<div id="game-container">

  <div id="ui">
    Score: <span id="score">0</span> |
    Level: <span id="level">1</span> |
    Time: <span id="time">0</span>s
  </div>

  <canvas id="tetris" width="300" height="600"></canvas>

  <div id="controls">
    <div class="control-btn" id="left">‚¨ÖÔ∏è</div>
    <div class="control-btn" id="rotate">üîÑ</div>
    <div class="control-btn" id="right">‚û°Ô∏è</div>
    <div class="control-btn" id="down">‚¨áÔ∏è</div>
  </div>
</div>

<div id="gameover-screen">
  <div style="font-size: 48px; letter-spacing: 4px; margin-bottom: 20px;">GAME OVER</div>

  <div style="font-size: 22px;">Score: <span id="final-score"></span></div>
  <div style="font-size: 22px;">Level: <span id="final-level"></span></div>
  <div style="font-size: 22px; margin-bottom: 30px;">Time: <span id="final-time"></span>s</div>

  <div id="restartBtn">RESTART</div>
</div>

<script>
document.getElementById("startBtn").onclick = () => {
    document.getElementById("start-screen").style.display = "none";
    document.getElementById("game-container").style.display = "flex";
    startGame();
};

let canvas, ctx;
let gridW=10, gridH=20, block=30;
let score=0, level=1, time=0;
let grid, shapes, colors, piece, px, py;
let last=0, drop=0, paused=true;

function startGame(){
  canvas=document.getElementById("tetris");
  ctx=canvas.getContext("2d");

  shapes=[
    [[1,1,1,1]],
    [[1,1],[1,1]],
    [[0,1,0],[1,1,1]],
    [[1,0],[1,0],[1,1]],
    [[0,1],[0,1],[1,1]]
  ];

  colors=["#6fbaff","#94ccff","#c7e5ff","#ffffff"];

  initGrid();
  newPiece();
  paused=false;
  update(0);

  setInterval(()=>{
    if(!paused){
      time++;
      document.getElementById("time").textContent=time;
    }
  },1000);
}

function initGrid(){ grid=Array(gridH).fill().map(()=>Array(gridW).fill(0)); }

function newPiece(){ piece=shapes[Math.random()*shapes.length|0]; px=3; py=0; }

function rotate(p){ return p[0].map((_,i)=>p.map(r=>r[i]).reverse()); }

function collides(nx,ny,p){
  for(let y=0;y<p.length;y++){
    for(let x=0;x<p[y].length;x++){
      if(p[y][x]&&(nx+x<0||nx+x>=gridW||ny+y>=gridH||grid[ny+y][nx+x])) return true;
    }
  }
  return false;
}

function merge(){ piece.forEach((r,y)=>r.forEach((v,x)=>{ if(v) grid[py+y][px+x]=1; })); }

function clearLines(){
  for(let y=gridH-1;y>=0;y--){
    if(grid[y].every(v=>v)){
      grid.splice(y,1);
      grid.unshift(Array(gridW).fill(0));
      score+=100;
      level=Math.floor(score/500)+1;
    }
  }
  document.getElementById("score").textContent=score;
  document.getElementById("level").textContent=level;
}

let stars=[];
for(let i=0;i<80;i++){
  stars.push({x:Math.random()*600, y:Math.random()*600, s:Math.random()*2, sp:0.4+Math.random()*0.5});
}

function drawStars(){
  ctx.fillStyle="white";
  for(let s of stars){
    ctx.globalAlpha=0.3;
    ctx.fillRect(s.x,s.y,s.s,s.s);
    s.y+=s.sp;
    if(s.y>canvas.height){ s.y=0; s.x=Math.random()*canvas.width; }
  }
  ctx.globalAlpha=1;
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawStars();

  for(let y=0;y<gridH;y++)
    for(let x=0;x<gridW;x++)
      if(grid[y][x]){
        ctx.fillStyle=colors[(x+y)%4];
        ctx.fillRect(x*block,y*block,block-1,block-1);
      }

  piece.forEach((r,y)=>
    r.forEach((v,x)=>{
      if(v){
        ctx.fillStyle=colors[(x+y)%4];
        ctx.fillRect((px+x)*block,(py+y)*block,block-1,block-1);
      }
    })
  );
}

function update(t){
  requestAnimationFrame(update);
  if(paused) return;

  let d=t-last;
  last=t;
  drop+=d;

  if(drop > 900 - level*60){
    py++; drop=0;

    if(collides(px,py,piece)){
      py--;
      merge();
      clearLines();
      newPiece();

      if(collides(px,py,piece)){
        showGameOver();
        return;
      }
    }
  }
  draw();
}

function showGameOver(){
  paused=true;

  document.getElementById("final-score").textContent=score;
  document.getElementById("final-level").textContent=level;
  document.getElementById("final-time").textContent=time;

  document.getElementById("gameover-screen").style.display="flex";
}

document.getElementById("restartBtn").onclick = () => {
  location.reload();
};

left.onclick=()=>{ if(!collides(px-1,py,piece)) px--; };
right.onclick=()=>{ if(!collides(px+1,py,piece)) px++; };
rotate.onclick=()=>{ let r=rotate(piece); if(!collides(px,py,r)) piece=r; };
down.onclick=()=>{ py++; if(collides(px,py,piece)) py--; };
</script>

</body>
</html>
